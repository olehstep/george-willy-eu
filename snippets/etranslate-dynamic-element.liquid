<script>
document.addEventListener("DOMContentLoaded",function(){let elementNameList=[];var k=[];var d=[];const b={characterData:true,childList:true,subtree:true};var i=function(l){k=[];d=[];l.forEach(function(n,m){if(n.type=="childList"&&n.addedNodes.length!=0){e(n.addedNodes)}});if(k!=""){g(k,d)}};var h=[];var a=function(l){let transData=[];let transDoms=[];l.forEach(function(n,m){if(n.type=="childList"&&n.addedNodes.length!=0){h.forEach(function(o){if("."+n.target.className==o||"#"+n.target.id==o){k=[];d=[];e(n.nextSibling.childNodes);j(n.target);if(k!=""){transData=transData.concat(k);transDoms=transDoms.concat(d)}}else{for(var p=0;p<n.addedNodes.length;p++){if(n.addedNodes[p].nodeType==1){if("."+n.addedNodes[p].className==o||"#"+n.addedNodes[p].id==o){k=[];d=[];e(n.addedNodes[p].childNodes);j(n.addedNodes[p]);if(k!=""){transData=transData.concat(k);transDoms=transDoms.concat(d)}}else{let elementDom=n.addedNodes[p].querySelectorAll(o);if(elementDom.length>0){k=[];d=[];e(elementDom);j(elementDom);if(k!=""){transData=transData.concat(k);transDoms=transDoms.concat(d)}}}}}}})}});if(transData!=""){g(transData,transDoms)}};const f=new MutationObserver(i);const c=new MutationObserver(a);elementNameList.forEach(function(l){let elementDom=document.querySelectorAll(l);if(elementDom.length>0){e(elementDom);j(elementDom)}else{c.observe(document.body,b);h.push(l)}});g(k,d);function e(l){for(var m=0;m<l.length;m++){if(l[m].nodeType==1){e(l[m].childNodes);if((l[m].nodeName==="INPUT"||l[m].nodeName==="TEXTAREA")&&l[m].getAttribute("placeholder")!=null){k.push(l[m].getAttribute("placeholder"));d.push({t:1,d:l[m]})}if(l[m].nodeName==="INPUT"&&l[m].attributes.type.value=="submit"){k.push(l[m].attributes.value.value);d.push({t:8,d:l[m]})}}if(l[m].nodeType==3){if(l[m].textContent.trim()!=""){k.push(l[m].textContent.trim());d.push({t:3,d:l[m]})}}}}function j(l){for(var m=0;m<l.length;m++){f.observe(l[m],b)}}function filterElementContentNumber(arr,elementTransDom){var returnData = [];arr.forEach((item,index)=>{if(Number(arr[index])>= 0){delete arr[index];delete elementTransDom[index]}});returnData[0]=arr.filter(item =>typeof item!== undefined);returnData[1] = elementTransDom.filter(item =>typeof item!== undefined);return returnData}function g(m,l){returnData=filterElementContentNumber(m,l);m=returnData[0];l=returnData[1];if(m!=""){let xmlHttp=new XMLHttpRequest();let element_data={domain:"{{shop.permanent_domain}}",lan_code:"{{shop.locale}}",request_url:window.location.origin+window.location.pathname,element_content:m,is_dynamic:true};xmlHttp.open("post","/apps/pagefly");xmlHttp.setRequestHeader("Content-Type","application/json");xmlHttp.setRequestHeader("CrossOrigin","true");xmlHttp.onreadystatechange=function(){if(xmlHttp.status==200){var n=xmlHttp.response;if(n!=""&&JSON.parse(n).status==="200"){transData=JSON.parse(n).data;for(var o=0;o<l.length;o++){if(l[o].t===1){l[o].d.setAttribute("placeholder",transData[o])}else{if(l[o].t===3){l[o].d.textContent=transData[o]}else{if(l[o].t===8){l[o].d.attributes.value.value=transData[o]}}}}l=[]}}};xmlHttp.send(JSON.stringify(element_data))}}});
</script>